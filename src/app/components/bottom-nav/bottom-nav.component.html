<nav
  class="fixed bottom-0 left-0 right-0 bg-[rgb(255_255_255/0.98)] dark:bg-[rgb(31_41_55/0.98)] backdrop-blur-xl border-t border-[#5a5c8c]/20 dark:border-[#9ca0c7]/20 shadow-lg shadow-black/5 z-[100] transition-all duration-300 md:hidden will-change-transform max-w-full overflow-x-hidden"
  role="navigation" aria-label="Navegación principal móvil" [style.padding-bottom]="'env(safe-area-inset-bottom)'">

  <div class="w-full max-w-full px-1 sm:px-2 py-1 box-border">
    <div class="flex items-center justify-around w-full max-w-full box-border" role="tablist">
      @for (item of navItems; track trackByNavItem($index, item)) {
      <button type="button" role="tab" [attr.aria-selected]="isActive(item.id)" [attr.aria-controls]="item.id"
        [attr.aria-label]="item.ariaLabel" (click)="scrollToSection(item.id)" [class]="
            'relative flex flex-col items-center justify-center gap-0.5 px-2 sm:px-3 py-2 rounded-2xl transition-all duration-300 min-w-[68px] sm:min-w-[72px] cursor-pointer touch-manipulation active:scale-95 ' +
            (isActive(item.id)
              ? 'text-[#5a5c8c] dark:text-[#9ca0c7] bg-[#5a5c8c]/10 dark:bg-[#9ca0c7]/10 scale-105'
              : 'text-gray-500 dark:text-gray-400 hover:text-[#5a5c8c] dark:hover:text-[#9ca0c7] hover:bg-[#5a5c8c]/5 dark:hover:bg-[#9ca0c7]/5 hover:scale-102')
          ">
        <!-- Icon Container -->
        <div class="relative transition-transform duration-300" [class.scale-110]="isActive(item.id)">
          @switch (item.icon) {
          @case ('home') {
          <svg class="w-6 h-6 sm:w-7 sm:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
          </svg>
          }
          @case ('services') {
          <svg class="w-6 h-6 sm:w-7 sm:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
          </svg>
          }
          @case ('plans') {
          <svg class="w-6 h-6 sm:w-7 sm:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
          </svg>
          }
          @case ('contact') {
          <svg class="w-6 h-6 sm:w-7 sm:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
          }
          }

          <!-- Active indicator dot -->
          @if (isActive(item.id)) {
          <div class="absolute -top-1 -right-1 w-2 h-2 bg-[#5a5c8c] dark:bg-[#9ca0c7] rounded-full animate-pulse"
            aria-hidden="true"></div>
          }
        </div>

        <!-- Label -->
        <span class="text-[10px] sm:text-xs font-medium transition-all duration-200"
          [class.font-semibold]="isActive(item.id)">
          {{ item.label }}
        </span>

        <!-- Bottom active indicator -->
        @if (isActive(item.id)) {
        <div
          class="absolute bottom-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-[#5a5c8c] dark:bg-[#9ca0c7] rounded-t-full transition-all duration-300"
          aria-hidden="true"></div>
        }
      </button>
      }
    </div>
  </div>
</nav>